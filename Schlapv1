-- Load WindUI
local Version = "1.6.31"
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/download/" .. Version .. "/main.lua"))()

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local Workspace = game:GetService("Workspace")

-- Variables
local WalkSpeedValue, JumpPowerValue = 16, 50
local SpeedEnabled = false
local AutoSlapEnabled = false
local SpinBotEnabled = false
local AntiVoidEnabled = false
local AntiVoidPart = nil

-- Create Window
local Window = WindUI:CreateWindow({
	Title = "Schlap",
	Icon = "rbxassetid://4483345998",
	Author = "Merqury Hub",
	Folder = "SchlapConfig",
	Size = UDim2.fromOffset(580, 460),
	KeySystem = {
		Key = "SchlapKey2025",
		Note = "Join our Discord for the key!",
		URL = "https://discord.gg/example",
		SaveKey = true
	},
	Transparent = true,
	Theme = "Dark",
	SideBarWidth = 170
})

-- === MAIN TAB ===
local mainTab = Window:Tab({
	Title = "Main",
	Icon = "hand"
})

-- Auto Slap
mainTab:Toggle({
	Title = "Auto Slap",
	Default = false,
	Callback = function(state)
		AutoSlapEnabled = state
	end
})

-- AntiVoid Toggle
mainTab:Toggle({
	Title = "Antivoid",
	Default = false,
	Callback = function(state)
		AntiVoidEnabled = state
		if state then
			-- Create AntiVoid Part
			if not AntiVoidPart then
				AntiVoidPart = Instance.new("Part")
				AntiVoidPart.Size = Vector3.new(2048, 1, 1567.88)
				AntiVoidPart.Anchored = true
				AntiVoidPart.Transparency = 1
				AntiVoidPart.Position = Vector3.new(-38.563, 45.713, 0)
				AntiVoidPart.Parent = Workspace

				-- Touch event to teleport player
				AntiVoidPart.Touched:Connect(function(hit)
					local player = Players:GetPlayerFromCharacter(hit.Parent)
					if player then
						local char = player.Character
						if char and char:FindFirstChild("HumanoidRootPart") then
							char.HumanoidRootPart.CFrame = CFrame.new(-12.149, -39.871, 319.452)
						end
					end
				end)
			end
		else
			-- Remove AntiVoid Part
			if AntiVoidPart then
				AntiVoidPart:Destroy()
				AntiVoidPart = nil
			end
		end
	end
})

-- === MISC TAB ===
local miscTab = Window:Tab({
	Title = "Misc",
	Icon = "settings"
})

-- WalkSpeed TextBox
miscTab:TextBox({
	Title = "WalkSpeed",
	Placeholder = "16",
	Callback = function(value)
		local num = tonumber(value)
		if num then
			WalkSpeedValue = num
			SpeedEnabled = true
		end
	end
})

-- JumpPower TextBox
miscTab:TextBox({
	Title = "JumpPower",
	Placeholder = "50",
	Callback = function(value)
		local num = tonumber(value)
		if num then
			JumpPowerValue = num
			SpeedEnabled = true
		end
	end
})

-- Rejoin Button
miscTab:Button({
	Title = "Rejoin",
	Callback = function()
		game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
	end
})

-- Server Hop Button
miscTab:Button({
	Title = "Server Hop",
	Callback = function()
		local HttpService = game:GetService("HttpService")
		local TeleportService = game:GetService("TeleportService")
		local PlaceId = game.PlaceId
		local Servers = {}
		local Success, Response = pcall(function()
			return game:HttpGet("https://games.roblox.com/v1/games/"..PlaceId.."/servers/Public?sortOrder=Asc&limit=100")
		end)
		if Success then
			local Data = HttpService:JSONDecode(Response)
			for _, server in pairs(Data.data) do
				if server.playing < server.maxPlayers and server.id ~= game.JobId then
					table.insert(Servers, server.id)
				end
			end
			if #Servers > 0 then
				TeleportService:TeleportToPlaceInstance(PlaceId, Servers[math.random(1, #Servers)], LocalPlayer)
			end
		end
	end
})

-- Spin Bot Toggle
miscTab:Toggle({
	Title = "Spin Bot",
	Default = false,
	Callback = function(state)
		SpinBotEnabled = state
	end
})

-- === RUN SERVICE ===
RunService.RenderStepped:Connect(function()
	-- Apply WalkSpeed/JumpPower
	if SpeedEnabled and Humanoid then
		Humanoid.WalkSpeed = WalkSpeedValue
		Humanoid.JumpPower = JumpPowerValue
	end

	-- Auto Slap logic
	if AutoSlapEnabled then
		for _, player in pairs(Players:GetPlayers()) do
			if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				local distance = (Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
				if distance <= 10 then
					local tool = LocalPlayer.Backpack:GetChildren()[math.random(1, #LocalPlayer.Backpack:GetChildren())]
					if tool and tool:IsA("Tool") then
						tool.Parent = Character
						tool:Activate()
						tool.Parent = LocalPlayer.Backpack
					end
				end
			end
		end
	end

	-- Spin Bot logic
	if SpinBotEnabled and Character:FindFirstChild("HumanoidRootPart") then
		Character.HumanoidRootPart.CFrame = Character.HumanoidRootPart.CFrame * CFrame.Angles(0, math.rad(15), 0)
	end
end)
